@using Microsoft.AspNetCore.Http.Extensions
@model Mostlylucid.Models.Blog.BlogPostViewModel



<title>@Model.Title</title>
<div class="pt-2 lg:pt-2">
    <div class="border-b border-grey-lighter pb-8 sm:pb-12">
        @foreach (var category in Model.Categories)
        {

        <a hx-boost="true"   hx-target="#contentcontainer"  asp-action="Category" asp-controller="Blog" asp-route-category="@category">
        <span
            class="mb-4 inline-block rounded-full bg-blue-dark px-2 py-1 font-body text-sm text-white">@category</span>
        </a>
        }
        @foreach (var language in Model.Languages)
        {

            <a hx-boost="true" hx-target="#contentcontainer" asp-action="Language" asp-controller="Blog" asp-route-slug="@Model.Slug" asp-route-language="@language">
                <span
                    class="mb-4 inline-block rounded-full bg-neutral-700 px-2 py-1 font-body text-sm text-white">@language</span>
            </a>
        }
        <h2
            class="block font-body text-3xl font-semibold leading-tight text-primary dark:text-white sm:text-4xl md:text-5xl">
            @Model.Title
        </h2>
        <div class="flex items-center pt-5 sm:pt-8">
            <p class="pr-2 font-body font-light text-primary dark:text-white">
                @Model.PublishedDate.ToString("D")
            </p>
            <span class="vdark:text-white font-body text-grey">//</span>
            <p class="pl-2 font-body font-light text-primary dark:text-white">
                @Model.ReadingTime
            </p>
        </div>
    </div>
    <div
        class="prose prose max-w-none border-b border-grey-lighter py-8 dark:prose-dark sm:py-12">
        @Html.Raw(Model.Content)
    </div>
@if (Model.Authenticated)
    {
        
  
    <div class=" max-w-none border-b border-grey-lighter py-8 dark:prose-dark sm:py-12">
        <textarea id="comment"></textarea>
        <button class="btn btn-primary" hx-action="Comment" hx-controller="Blog" hx-post hx-vals="js:{comment: simplemde.value()}"  hx-route-slug="@Model.Slug" hx-swap="outerHTML" hx-target="#comment"  onclick="prepareForSubmission()" >Comment</button>
    </div>
    }
    else
    {
        <div class=" max-w-none border-b border-grey-lighter py-8 dark:prose-dark sm:py-12">
            <p class="font-body text-lg font-medium text-primary dark:text-white">Please login to comment</p>
            <div class="w-[200px] h-[39px] overflow-hidden rounded">
                <div class="g_id_signin"
                     data-type="standard"
                     data-size="large"
                     data-width=200
                     data-theme="filled_black"
                     data-text="sign_in_with"
                     data-shape="rectangular"
                     data-logo_alignment="left">
                </div>
            </div>
        </div>
    }
</div>
<div class="flex items-center py-10">
    <span class="pr-5 font-body font-medium text-primary dark:text-white"
    >Share</span
    >
    <a href="/">
        <i
            class="bx bxl-facebook text-2xl text-primary transition-colors hover:text-secondary dark:text-white dark:hover:text-secondary"
        ></i
        ></a>
    <a href="/">
        <i
            class="bx bxl-twitter pl-2 text-2xl text-primary transition-colors hover:text-secondary dark:text-white dark:hover:text-secondary"
        ></i>
    </a>
    <a href="/">
        <i
            class="bx bxl-linkedin pl-2 text-2xl text-primary transition-colors hover:text-secondary dark:text-white dark:hover:text-secondary"
        ></i
        ></a>
    <a href="/">
        <i
            class="bx bxl-reddit pl-2 text-2xl text-primary transition-colors hover:text-secondary dark:text-white dark:hover:text-secondary"
        ></i
        ></a>
</div>